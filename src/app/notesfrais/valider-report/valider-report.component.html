<ng-template #imageList let-close="close">
  <div class="modal-header">
    <h5 class="modal-title">Voici les images fournies: </h5>
    <button type="button" class="close" (click)="close()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div *ngFor="let option of modal_element.FILE">
      <pre>
        <img [src] = "option.PATH">
      </pre>
    </div>
  </div>
</ng-template>


<ng-template #refuseModal let-close="close">
  <div class="modal-header">
    <h5 class="modal-title">Voici les images fournies: </h5>
    <button type="button" class="close" (click)="close()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <textarea #refuseMotives class="style-textarea" name="message" placeholder="Veuillez justifier le refus"></textarea>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-secondary" (click)="refuse(modal_element, refuseMotives.value); close()">Confirmer
      le refus</button>
  </div>
</ng-template>


<div style="padding: 10px 0px 0px; ">
  <h3 style="margin-left: 20px; display: block;">LISTE DES NOTES DE FRAIS</h3>
</div>
<div id="top_box_reports" class="top_div">
  <div class="column">
    <input #selectedPerson type="text" style="float: left; width: 100%; display: inline-block;" placeholder="Marie ANNIS">
  </div>

  <div class="column">
    <select #selectedMonth class="soflow" style="display: inline-block;">
      <option value="" selected>Mois</option>
      <option value="/01/">Janvier</option>
      <option value="/02/">Fevrier</option>
      <option value="/03/">Mars</option>
      <option value="/04/">Avril</option>
      <option value="/05/">Mai</option>
      <option value="/06/">Juin</option>
      <option value="/07/">Juillet</option>
      <option value="/08/">Août</option>
      <option value="/09/">Septembre</option>
      <option value="/10/">Octobre</option>
      <option value="/11/">Novembre</option>
      <option value="/12/">Décembre</option>
    </select>

    <select #selectedYear class="soflow" style="display: inline-block;">
      <option value="" selected>Année</option>
      <option value="2019">2019</option>
      <option value="2018">2018</option>
      <option value="2017">2017</option>
    </select>
  </div>

  <div class="column">
    <select #selectedStatus class="soflow" style="display: inline-block;">
      <option value="" selected>Statut</option>
      <option value="">Tous</option>
      <option value="En attente">En attente</option>
    </select>

    <button class="validate-button" type="submit" value="Register" style="width: 100%;" (click)="findEmployees(selectedPerson.value, selectedMission.value, selectedMonth.value, selectedYear.value, selectedStatus.value)">Rechercher</button>
  </div>
</div>

<div id="low_box_reports" class="top_div">
  <div style="padding: 10px 10px 0px;">
    <h4 style="font-size: 20px">Votre note de frais</h4>
    <div class="example-container" style="height: auto;">
      <table mat-table [dataSource]="expenseReportRequest">

        <ng-container matColumnDef="COLLABORATEUR">
          <th mat-header-cell *matHeaderCellDef> COLLABORATEUR </th>
          <td mat-cell *matCellDef="let element" [ngStyle]="{'background-color': colors[element.status]}">
            {{ this.userService.getUserById(this.user, element.uid).lastName }} {{
            this.userService.getUserById(this.user,
            element.uid).firstName }}
          </td>
        </ng-container>

        <ng-container matColumnDef="SERVICE">
          <th mat-header-cell *matHeaderCellDef> SERVICE </th>
          <td mat-cell *matCellDef="let element" [ngStyle]="{'background-color': colors[element.status]}">
            {{ this.serviceService.getServiceById(this.service, this.userService.getUserById(this.user,
            element.uid).sid).name }}
          </td>
        </ng-container>

        <ng-container matColumnDef="MOIS">
          <th mat-header-cell *matHeaderCellDef> MOIS </th>
          <td mat-cell *matCellDef="let element" [ngStyle]="{'background-color': colors[element.status]}"> {{
            element.requestDate
            |
            date: 'MM/yyyy'}} </td>
        </ng-container>

        <ng-container matColumnDef="STATUT">
          <th mat-header-cell *matHeaderCellDef> STATUT </th>
          <td mat-cell *matCellDef="let element" [ngStyle]="{'background-color': colors[element.status]}">
            {{element.status }}
          </td>
        </ng-container>

        <ng-container matColumnDef="ACTION">
          <th mat-header-cell *matHeaderCellDef> ACTION </th>
          <td mat-cell *matCellDef="let element" [ngStyle]="{'background-color': colors[element.status]}">
            <button routerLink="notfound" class="consult-button" (click)="consultation(element.did)">
            </button>
          </td>
        </ng-container>


        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>

  </div>
</div>
