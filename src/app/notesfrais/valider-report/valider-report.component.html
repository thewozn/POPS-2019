<ng-template #imageList let-close="close">
  <div class="modal-header">
    <h5 class="modal-title">Voici les images fournies: </h5>
    <button type="button" class="close" (click)="close()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div *ngFor="let option of modal_element.FILE">
      <pre>
        <img [src] = "option.PATH">
      </pre>
    </div>
  </div>
</ng-template>


<ng-template #refuseModal let-close="close">
  <div class="modal-header">
    <h5 class="modal-title">Voici les images fournies: </h5>
    <button type="button" class="close" (click)="close()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <textarea #refuseMotives class="style-textarea"  name="message" placeholder="Veuillez justifier le refus"></textarea>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-secondary" (click)="refuse(modal_element, refuseMotives.value); close()">Confirmer le refus</button>
  </div>
</ng-template>


<div style="padding: 10px 0px 0px; ">
  <h3 style="margin-left: 20px; display: block;">NOTES DE FRAIS COLLABOATEURS</h3>
</div>
<div id="top_box_reports" class="top_div" style="">
  <div class = "column">
    <input #selectedPerson type="text" style="float: left; width: 100%; display: inline-block;" placeholder="Marie ANNIS">
    <select #selectedMission class="soflow" style="display: inline-block;">
      <option value="" selected>Mission</option>
      <option *ngFor="let option of missions_list" [value]="option">{{option}}</option>
    </select>
  </div>

  <div class = "column">
   <select #selectedMonth class="soflow" style="display: inline-block;">
      <option value="" selected>Mois</option>
      <option value="/01/">Janvier</option>
      <option value="/02/">Fevrier</option>
      <option value="/03/">Mars</option>
      <option value="/04/">Avril</option>
      <option value="/05/">Mai</option>
      <option value="/06/">Juin</option>
      <option value="/07/">Juillet</option>
      <option value="/08/">Août</option>
      <option value="/09/">Septembre</option>
      <option value="/10/">Octobre</option>
      <option value="/11/">Novembre</option>
      <option value="/12/">Décembre</option>
    </select>

    <select #selectedYear class="soflow" style="display: inline-block;">
      <option value="" selected>Année</option>
      <option value="2019">2019</option>
      <option value="2018">2018</option>
      <option value="2017">2017</option>
    </select>
  </div>

  <div class = "column">
    <select #selectedStatus class="soflow" style="display: inline-block;">
      <option value="" selected>Statut</option>
      <option value="">Tous</option>
      <option value="En attente">En attente</option>
    </select>

    <button class="validate-button" type="submit" value="Register" style="width: 100%;"
            (click)="findEmployees(selectedPerson.value, selectedMission.value, selectedMonth.value, selectedYear.value, selectedStatus.value)"
    >Rechercher</button>
  </div>
</div>

<div id="low_box_reports" class="top_div" style="">
  <div style="padding: 10px 10px 0px;">
    <h4 style="font-size: 20px">Votre note de frais</h4>
    <div class="example-container" style="height: auto;">
      <table mat-table [dataSource]="dataSource">

        <!-- Position Column -->
        <ng-container matColumnDef="MISSION">
          <th mat-header-cell *matHeaderCellDef> Mission</th>
          <td mat-cell *matCellDef="let element"> {{element.MISSION}} </td>
        </ng-container>

        <ng-container matColumnDef="COLLABORATEUR">
          <th mat-header-cell *matHeaderCellDef> Collaborateur</th>
          <td mat-cell *matCellDef="let element"> {{element.COLLABORATEUR}} </td>
        </ng-container>

        <ng-container matColumnDef="STATUT">
          <th mat-header-cell *matHeaderCellDef> Statut</th>
          <td mat-cell *matCellDef="let element"> {{element.STATUT.substring(0, 15)}} </td>
        </ng-container>

        <ng-container matColumnDef="REMBOURSEMENT">
          <th mat-header-cell *matHeaderCellDef> Remboursement</th>
          <td mat-cell *matCellDef="let element"> {{element.REMBOURSEMENT}} </td>
        </ng-container>

        <ng-container matColumnDef="TYPE">
          <th mat-header-cell *matHeaderCellDef> Type</th>
          <td mat-cell *matCellDef="let element"> {{element.TYPE}} </td>
        </ng-container>

        <ng-container matColumnDef="DATE">
          <th mat-header-cell *matHeaderCellDef> Date</th>
          <td mat-cell *matCellDef="let element"> {{element.DATE |  date:'MM/dd/yyyy'}} </td>
        </ng-container>

        <ng-container matColumnDef="MONTANT">
          <th mat-header-cell *matHeaderCellDef> Montant</th>
          <td mat-cell *matCellDef="let element"> {{element.MONTANT}} EUR </td>
        </ng-container>

        <ng-container matColumnDef="ACTION">
          <th mat-header-cell *matHeaderCellDef> Action</th>
          <td mat-cell *matCellDef="let element">
            <button class="gallery-button" (click)="showGalleryEvent(element)">
            </button>
            <button class="accept-button" (click)="validate(element)">
            </button>
            <button class="refuse-button" (click)="showRefuseEvent(element)">
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>

  </div>
</div>
